# Вмикаємо "переписувач" URL
RewriteEngine On
RewriteBase /

# ---------------------------------------------
# --- Крок 1: Правило для API (Бекенд) ---
# ---------------------------------------------
# Якщо запит починається з /api/
RewriteRule ^api/(.*)$ http://localhost:5000/$1 [P,L]
# [P] = Це Proxy (проксі-запит)
# [L] = Last (зупинити обробку правил)

# ---------------------------------------------
# --- Крок 2: Правило для React (Фронтенд) ---
# ---------------------------------------------
# Якщо запит НЕ є реальним файлом...
RewriteCond %{REQUEST_FILENAME} !-f
# І НЕ є реальною папкою...
RewriteCond %{REQUEST_FILENAME} !-d
# ...відправити його на index.html (де працює React Router)
RewriteRule . /index.html [L]