"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[400],{1326:(e,t,r)=>{function a(e){return new Intl.NumberFormat("uk-UA",{style:"currency",currency:"UAH",minimumFractionDigits:0}).format(e)}r.d(t,{A:()=>a})},6400:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var a=r(9379),i=r(5043),s=r(3003),l=r(5475),n=r(3216),o=r(4493),c=r(9722),d=r(3546),p=r(7200),u=r(1326),y=r(579);const h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:820;const[t,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const t=window.matchMedia("(max-width: ".concat(e,"px)")),a=e=>r(e.matches);return r(t.matches),t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[e]),t},v=e=>{try{return new Date(e).toLocaleDateString("uk-UA")}catch(t){return e||""}},m=e=>{let{rating:t=0}=e;return(0,y.jsx)("div",{style:{display:"flex",gap:2,color:"var(--yellow)"},children:[1,2,3,4,5].map(e=>(0,y.jsx)("span",{style:{fontSize:16},children:e<=t?"\u2605":"\u2606"},e))})},x=e=>{let{active:t,onClick:r,children:a,ariaLabel:i}=e;return(0,y.jsx)("button",{type:"button",onClick:r,className:"btn tab-btn","aria-pressed":t,"aria-label":i,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null===r||void 0===r?void 0:r()),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,padding:"10px 10px",fontSize:12,fontWeight:900,letterSpacing:.3,borderRadius:12,border:"1px solid",background:t?"var(--seg-active-bg, var(--turquoise))":"var(--seg-inactive-bg, var(--surface-0))",color:t?"var(--seg-active-fg, var(--white))":"var(--seg-inactive-fg, var(--text-2))",borderColor:t?"transparent":"var(--border)",boxShadow:t?"0 6px 18px rgba(0,0,0,.16), inset 0 1px 0 rgba(255,255,255,.45)":"var(--shadow-xs)",textShadow:"none",outline:"none",cursor:"pointer"},children:(0,y.jsx)("span",{style:{pointerEvents:"none"},children:a})})},g=e=>{let{token:t,isMobile:r}=e;const[a,s]=(0,i.useState)([]),[n,o]=(0,i.useState)({loading:!0,error:""});return(0,i.useEffect)(()=>{let e=!1;return(async()=>{if(t){o({loading:!0,error:""});try{const{data:r}=await c.A.get("/api/orders",{headers:{Authorization:"Bearer ".concat(t)}});e||(s(Array.isArray(r)?r:(null===r||void 0===r?void 0:r.orders)||[]),o({loading:!1,error:""}))}catch(r){e||o({loading:!1,error:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0456\u0441\u0442\u043e\u0440\u0456\u044e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c."})}}})(),()=>{e=!0}},[t]),n.loading?(0,y.jsx)("p",{className:"p center",style:{color:"var(--text-3)"},children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c\u2026"}):n.error?(0,y.jsx)("p",{className:"p center",style:{color:"var(--pink)"},children:n.error}):a.length?(0,y.jsx)("div",{style:{display:"grid",gap:12},children:a.map((e,t)=>{const a=e.id||e._id||t+1,i=(e=>{const t=(e||"").toString().toLowerCase();return/delivered|completed|\u0432\u0438\u043a\u043e\u043d|\u0434\u043e\u0441\u0442\u0430\u0432/i.test(t)?{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e",color:"#1fbf64"}:/paid|\u043e\u043f\u043b\u0430\u0447/i.test(t)?{label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",color:"#00CED1"}:/processing|\u0432 \u043e\u0431\u0440\u043e\u0431/i.test(t)?{label:"\u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456",color:"#FFD700"}:/canceled|cancelled|\u0441\u043a\u0430\u0441/i.test(t)?{label:"\u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",color:"#dc3545"}:/pending|\u043e\u0447\u0456\u043a\u0443/i.test(t)?{label:"\u041e\u0447\u0456\u043a\u0443\u0454",color:"#8A2BE2"}:{label:e||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u043e",color:"var(--text-3)"}})(e.status);return(0,y.jsx)(l.N_,{to:"/account/orders/".concat(a),style:{textDecoration:"none",color:"inherit"},children:(0,y.jsxs)(p.P.div,{className:"surface order-card",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.04*t},style:{display:"grid",gap:10,padding:14,borderLeft:"4px solid ".concat(e.statusColor||i.color),alignItems:"center",gridTemplateColumns:r?"1fr 1fr":"1fr 1fr 1fr 1fr auto"},children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{style:{fontSize:11,color:"var(--text-3)",marginBottom:4},children:"\u041d\u043e\u043c\u0435\u0440"}),(0,y.jsxs)("div",{className:"mono",style:{color:"var(--text-1)",fontWeight:800},children:["#",a]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{style:{fontSize:11,color:"var(--text-3)",marginBottom:4},children:"\u0414\u0430\u0442\u0430"}),(0,y.jsx)("div",{style:{color:"var(--text-2)"},children:v(e.createdAt)})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{style:{fontSize:11,color:"var(--text-3)",marginBottom:4},children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,y.jsx)("div",{className:"badge",style:{background:"transparent",borderColor:"".concat(e.statusColor||i.color,"55"),color:e.statusColor||i.color,fontWeight:800,padding:"6px 10px"},children:i.label})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{style:{fontSize:11,color:"var(--text-3)",marginBottom:4},children:"\u0421\u0443\u043c\u0430"}),(0,y.jsx)("div",{className:"price",style:{fontWeight:800},children:(0,u.A)(e.total||0)})]}),!r&&(0,y.jsx)("div",{style:{justifySelf:"end",opacity:.9,color:"var(--turquoise)"},children:"\u2192"})]})},a)})}):(0,y.jsx)("p",{className:"p center",style:{color:"var(--text-3)"},children:"\u0423 \u0432\u0430\u0441 \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c."})},f=e=>{let{token:t,isMobile:r}=e;const[s,l]=(0,i.useState)({firstName:"",lastName:"",birthday:""}),[n,o]=(0,i.useState)({loading:!0,error:"",success:""});(0,i.useEffect)(()=>{let e=!1;return(async()=>{if(t){o({loading:!0,error:"",success:""});try{const{data:r}=await c.A.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(t)}});e||(l({firstName:(null===r||void 0===r?void 0:r.firstName)||"",lastName:(null===r||void 0===r?void 0:r.lastName)||"",birthday:null!==r&&void 0!==r&&r.birthday?String(r.birthday).split("T")[0]:""}),o({loading:!1,error:"",success:""}))}catch(r){e||o({loading:!1,error:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0434\u0430\u043d\u0456 \u043f\u0440\u043e\u0444\u0456\u043b\u044e.",success:""})}}})(),()=>{e=!0}},[t]);const d=e=>l(t=>(0,a.A)((0,a.A)({},t),{},{[e.target.name]:e.target.value}));return n.loading?(0,y.jsx)("p",{className:"p center",style:{color:"var(--text-3)"},children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f\u2026"}):n.error?(0,y.jsx)("p",{className:"p center",style:{color:"var(--pink)"},children:n.error}):(0,y.jsxs)(p.P.form,{onSubmit:async e=>{e.preventDefault(),o(e=>(0,a.A)((0,a.A)({},e),{},{error:"",success:""}));try{await c.A.put("/api/users/me",s,{headers:{Authorization:"Bearer ".concat(t)}}),o(e=>(0,a.A)((0,a.A)({},e),{},{success:"\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e!"}))}catch(r){o(e=>(0,a.A)((0,a.A)({},e),{},{error:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437."}))}},className:"settings-form",initial:{opacity:0},animate:{opacity:1},style:{display:"grid",gap:14},children:[(0,y.jsx)("h3",{className:"h2 retro",style:{marginBottom:6},children:"\u041e\u0441\u043e\u0431\u0438\u0441\u0442\u0456 \u0434\u0430\u043d\u0456"}),(0,y.jsxs)("div",{className:"form-group-pair",style:{display:"grid",gap:12,gridTemplateColumns:r?"1fr":"1fr 1fr"},children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{style:{color:"var(--text-2)"},children:"\u0406\u043c'\u044f"}),(0,y.jsx)("input",{name:"firstName",value:s.firstName,onChange:d,className:"input"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{style:{color:"var(--text-2)"},children:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435"}),(0,y.jsx)("input",{name:"lastName",value:s.lastName,onChange:d,className:"input"})]})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{style:{color:"var(--text-2)"},children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,y.jsx)("input",{type:"date",name:"birthday",value:s.birthday,onChange:d,className:"input"})]}),n.success&&(0,y.jsx)("p",{className:"p center",style:{color:"var(--green)",margin:0},children:n.success}),(0,y.jsx)("button",{type:"submit",className:"btn btn-green",style:{justifySelf:r?"stretch":"start"},children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})]})},j=e=>{let{token:t,isMobile:r}=e;const[a,s]=(0,i.useState)([]),[n,o]=(0,i.useState)({loading:!0,error:""});return(0,i.useEffect)(()=>{let e=!1;return(async()=>{if(t){o({loading:!0,error:""});try{const{data:r}=await c.A.get("/api/users/me/reviews",{headers:{Authorization:"Bearer ".concat(t)}});e||(s(Array.isArray(r)?r:(null===r||void 0===r?void 0:r.reviews)||[]),o({loading:!1,error:""}))}catch(r){e||o({loading:!1,error:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0432\u0456\u0434\u0433\u0443\u043a\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430."})}}})(),()=>{e=!0}},[t]),n.loading?(0,y.jsx)("p",{className:"p center",style:{color:"var(--text-3)"},children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0432\u0456\u0434\u0433\u0443\u043a\u0456\u0432\u2026"}):n.error?(0,y.jsx)("p",{className:"p center",style:{color:"var(--pink)"},children:n.error}):a.length?(0,y.jsx)("div",{style:{display:"grid",gap:12},children:a.map((e,t)=>{var a,i,s,n,o,c,d;return(0,y.jsxs)(p.P.div,{className:"surface",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.04*t},style:{padding:14},children:[(0,y.jsxs)("div",{style:{display:"grid",gap:12,gridTemplateColumns:r?"48px 1fr":"60px 1fr",alignItems:"center"},children:[(0,y.jsx)(l.N_,{to:"/product/".concat((null===(a=e.product)||void 0===a?void 0:a.id)||(null===(i=e.product)||void 0===i?void 0:i._id)||""),style:{display:"inline-block"},children:(0,y.jsx)("img",{src:null===(s=e.product)||void 0===s?void 0:s.image,alt:(null===(n=e.product)||void 0===n?void 0:n.name)||"\u0422\u043e\u0432\u0430\u0440",style:{width:r?48:60,height:r?48:60,objectFit:"contain",borderRadius:10,background:"var(--surface-1)",border:"1px solid var(--border)"}})}),(0,y.jsxs)("div",{style:{minWidth:0},children:[(0,y.jsx)(l.N_,{to:"/product/".concat((null===(o=e.product)||void 0===o?void 0:o.id)||(null===(c=e.product)||void 0===c?void 0:c._id)||""),style:{textDecoration:"none"},children:(0,y.jsx)("p",{className:"p mono",style:{margin:0,color:"var(--turquoise)",fontSize:13,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(null===(d=e.product)||void 0===d?void 0:d.name)||"\u0422\u043e\u0432\u0430\u0440"})}),(0,y.jsx)("div",{style:{marginTop:6},children:(0,y.jsx)(m,{rating:e.rating})})]})]}),(0,y.jsx)("p",{className:"p",style:{marginTop:12,color:"var(--text-1)",borderLeft:"3px solid var(--turquoise)",paddingLeft:10,fontStyle:"italic"},children:e.text}),(0,y.jsx)("p",{style:{fontSize:10,color:"var(--text-3)",marginTop:10,textAlign:"right"},children:v(e.createdAt)})]},e.id||t)})}):(0,y.jsx)("p",{className:"p center",style:{color:"var(--text-3)"},children:"\u0412\u0438 \u0449\u0435 \u043d\u0435 \u0437\u0430\u043b\u0438\u0448\u0438\u043b\u0438 \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0432\u0456\u0434\u0433\u0443\u043a\u0443."})};function b(){const e=(0,s.wA)(),t=(0,n.Zp)(),{user:r,token:a,isAuthenticated:l}=(0,s.d4)(e=>e.auth),c=h(820),[u,v]=(0,i.useState)("orders");(0,i.useEffect)(()=>{l||t("/login")},[l,t]);const m=()=>{e((0,o.ri)()),t("/")};if(!r)return(0,y.jsx)("p",{className:"p center",style:{color:"var(--text-3)"},children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0444\u0456\u043b\u044e\u2026"});const b=[{key:"orders",label:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"},{key:"reviews",label:"\u0412\u0456\u0434\u0433\u0443\u043a\u0438"},{key:"settings",label:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}],N=(0,y.jsx)("div",{className:"surface",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6,padding:6,borderRadius:"var(--radius)",position:"sticky",top:c?70:0,zIndex:5},children:b.map(e=>(0,y.jsx)(x,{active:u===e.key,onClick:()=>v(e.key),ariaLabel:e.label,children:e.label},e.key))});return(0,y.jsx)(p.P.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"container",style:{paddingTop:14},children:(0,y.jsxs)("div",{className:"account-layout",style:{display:"grid",gap:16,gridTemplateColumns:c?"1fr":"280px 1fr"},children:[!c&&(0,y.jsxs)("aside",{className:"surface account-sidebar",style:{display:"flex",flexDirection:"column",gap:12},children:[(0,y.jsxs)("div",{className:"account-user-info",style:{paddingBottom:12,borderBottom:"1px solid var(--border)"},children:[(0,y.jsx)("h2",{className:"h2 mono",style:{margin:0,color:"var(--text-1)"},children:r.name}),(0,y.jsx)("p",{className:"p",style:{marginTop:6,color:"var(--text-3)",fontSize:12},children:r.email})]}),(0,y.jsx)("nav",{className:"account-nav",style:{display:"grid",gap:8},children:b.map(e=>(0,y.jsx)(x,{active:u===e.key,onClick:()=>v(e.key),ariaLabel:e.label,children:e.label},e.key))}),(0,y.jsx)("button",{onClick:m,className:"btn btn-outline",style:{marginTop:"auto"},children:"\u0412\u0438\u0439\u0442\u0438"})]}),(0,y.jsxs)("main",{className:"account-content",style:{display:"grid",gap:14},children:[c&&(0,y.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,y.jsx)("div",{className:"surface",style:{padding:12,borderRadius:"var(--radius)"},children:(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[(0,y.jsxs)("div",{style:{minWidth:0},children:[(0,y.jsx)("h2",{className:"h2 mono",style:{margin:0,color:"var(--text-1)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.name}),(0,y.jsx)("p",{className:"p",style:{margin:0,color:"var(--text-3)",fontSize:12,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.email})]}),(0,y.jsx)("button",{onClick:m,className:"btn btn-outline",style:{whiteSpace:"nowrap"},children:"\u0412\u0438\u0439\u0442\u0438"})]})}),N]}),(0,y.jsx)(d.N,{mode:"wait",children:(0,y.jsxs)(p.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},children:["orders"===u&&(0,y.jsx)(g,{token:a,isMobile:c}),"reviews"===u&&(0,y.jsx)(j,{token:a,isMobile:c}),"settings"===u&&(0,y.jsx)(f,{token:a,isMobile:c})]},u)})]})]})})}}}]);
//# sourceMappingURL=400.83ad8809.chunk.js.map