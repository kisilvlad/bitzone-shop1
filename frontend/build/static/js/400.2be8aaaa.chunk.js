"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[400],{1326:(e,t,r)=>{function a(e){return new Intl.NumberFormat("uk-UA",{style:"currency",currency:"UAH",minimumFractionDigits:0}).format(e)}r.d(t,{A:()=>a})},6400:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var a=r(9379),s=r(5043),i=r(3003),n=r(5475),l=r(3216),o=r(4493),c=r(9722),d=r(3546),p=r(7200),u=r(1326),y=r(579);const x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:820;const[t,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const t=window.matchMedia("(max-width: ".concat(e,"px)")),a=e=>r(e.matches);return r(t.matches),t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[e]),t},g=e=>{try{return new Date(e).toLocaleDateString("uk-UA",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return e||""}},h=e=>{let{rating:t=0}=e;return(0,y.jsx)("div",{style:{display:"flex",gap:2,color:"var(--yellow)"},children:[1,2,3,4,5].map(e=>(0,y.jsx)("span",{style:{fontSize:16},children:e<=t?"\u2605":"\u2606"},e))})},f=e=>{let{active:t,onClick:r,children:a,ariaLabel:s}=e;return(0,y.jsx)("button",{type:"button",onClick:r,className:"btn tab-btn","aria-pressed":t,"aria-label":s,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null===r||void 0===r||r())},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:6,padding:"8px 14px",borderRadius:999,border:"none",fontSize:14,cursor:"pointer",background:t?"var(--turquoise-2)":"var(--surface-2)",color:t?"var(--black)":"var(--text-2)",boxShadow:t?"0 0 0 1px rgba(0,0,0,0.14)":"none",transition:"background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease"},children:a})},m=e=>{let{token:t,isMobile:r}=e;const[a,i]=(0,s.useState)([]),[l,o]=(0,s.useState)({loading:!0,error:""});return(0,s.useEffect)(()=>{if(!t)return;let e=!1;return(async()=>{o({loading:!0,error:""});try{const{data:r}=await c.A.get("/api/orders/my",{headers:{Authorization:"Bearer ".concat(t)}}),a=Array.isArray(r)?r:[];e||(i(a),o({loading:!1,error:""}))}catch(r){console.error("[OrdersTab] \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c:",r),e||o({loading:!1,error:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0456\u0437\u043d\u0456\u0448\u0435."})}})(),()=>{e=!0}},[t]),l.loading?(0,y.jsx)("div",{className:"surface",style:{padding:16},children:(0,y.jsx)("p",{style:{margin:0,color:"var(--text-2)"},children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0443\u0454\u043c\u043e \u0432\u0430\u0448\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f\u2026"})}):l.error?(0,y.jsx)("div",{className:"surface",style:{padding:16},children:(0,y.jsx)("p",{style:{margin:0,color:"var(--error)"},children:l.error})}):a.length?(0,y.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:a.map((e,t)=>{const a=e.id||e._id||t+1,s=(e=>{const t=(e||"").toString().toLowerCase();return/delivered|completed|\u0432\u0438\u043a\u043e\u043d|\u0434\u043e\u0441\u0442\u0430\u0432/i.test(t)?{label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e",color:"#1fbf64"}:/paid|\u043e\u043f\u043b\u0430\u0447/i.test(t)?{label:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",color:"#00CED1"}:/processing|\u0432 \u043e\u0431\u0440\u043e\u0431/i.test(t)?{label:"\u0412 \u043e\u0431\u0440\u043e\u0431\u0446\u0456",color:"#FFD700"}:/canceled|cancelled|\u0441\u043a\u0430\u0441/i.test(t)?{label:"\u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",color:"#dc3545"}:/pending|\u043e\u0447\u0456\u043a\u0443/i.test(t)?{label:"\u041e\u0447\u0456\u043a\u0443\u0454",color:"#8A2BE2"}:{label:e||"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u043e",color:"var(--text-3)"}})(e.status),i=e.items||[],l=e.total||0,o=i.slice(0,4),c=i.length>4?i.length-4:0;return(0,y.jsx)(n.N_,{to:"/account/orders/".concat(a),style:{textDecoration:"none",color:"inherit"},children:(0,y.jsxs)(p.P.div,{className:"surface order-card",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.03*t},style:{padding:r?12:16,borderRadius:18,borderLeft:"4px solid ".concat(e.statusColor||s.color),display:"grid",gridTemplateColumns:r?"minmax(0, 1fr)":"minmax(0, 2.1fr) minmax(0, 2.3fr) minmax(0, 1.6fr) auto",gap:10,alignItems:"center"},children:[(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,justifyContent:"space-between"},children:[(0,y.jsxs)("div",{className:"mono",style:{fontWeight:800,color:"var(--text-1)",fontSize:14},children:["#",a]}),(0,y.jsx)("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"4px 10px",borderRadius:999,fontSize:11,background:"rgba(255,255,255,0.03)",border:"1px solid ".concat(e.statusColor||s.color),color:e.statusColor||s.color,textTransform:"uppercase",letterSpacing:.06,whiteSpace:"nowrap"},children:s.label})]}),(0,y.jsx)("div",{style:{fontSize:12,color:"var(--text-3)"},children:g(e.createdAt)})]}),(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,overflow:"hidden"},children:[o.map((e,t)=>(0,y.jsx)("div",{style:{width:r?40:42,height:r?40:42,borderRadius:10,overflow:"hidden",flex:"0 0 auto",background:"var(--surface-2)",border:"1px solid rgba(255,255,255,0.04)"},children:(0,y.jsx)("img",{src:e.image||"/assets/images/placeholder-product.png",alt:e.name||"\u0422\u043e\u0432\u0430\u0440",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},e.id||t)),c>0&&(0,y.jsxs)("div",{style:{fontSize:12,color:"var(--text-3)",paddingLeft:4,whiteSpace:"nowrap"},children:["+",c," \u0449\u0435"]})]}),(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:r?"flex-start":"flex-end",gap:2},children:[(0,y.jsx)("span",{style:{fontSize:11,color:"var(--text-3)",textTransform:"uppercase",letterSpacing:.06},children:"\u0421\u0443\u043c\u0430"}),(0,y.jsx)("span",{className:"price",style:{fontWeight:800,fontSize:r?15:16},children:(0,u.A)(l||0)})]}),!r&&(0,y.jsx)("div",{style:{justifySelf:"end",fontSize:18,color:"var(--turquoise-2)",opacity:.85},children:"\u2192"})]})},a)})}):(0,y.jsx)("div",{className:"surface",style:{padding:16},children:(0,y.jsx)("p",{style:{margin:0,color:"var(--text-2)"},children:"\u0412\u0438 \u0449\u0435 \u043d\u0435 \u0440\u043e\u0431\u0438\u043b\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c. \u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0449\u043e\u0441\u044c \u0443 \u043a\u0430\u0442\u0430\u043b\u043e\u0437\u0456!"})})},v=e=>{let{token:t}=e;const[r,a]=(0,s.useState)([]),[i,n]=(0,s.useState)({loading:!0,error:""});return(0,s.useEffect)(()=>{if(!t)return;let e=!1;return(async()=>{n({loading:!0,error:""});try{const{data:r}=await c.A.get("/api/users/reviews",{headers:{Authorization:"Bearer ".concat(t)}});e||(a(Array.isArray(r)?r:[]),n({loading:!1,error:""}))}catch(r){console.error("[ReviewsTab] \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0432\u0456\u0434\u0433\u0443\u043a\u0456\u0432:",r),e||n({loading:!1,error:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0432\u0456\u0434\u0433\u0443\u043a\u0438."})}})(),()=>{e=!0}},[t]),i.loading?(0,y.jsx)("div",{className:"surface",style:{padding:16},children:(0,y.jsx)("p",{style:{margin:0,color:"var(--text-2)"},children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0443\u0454\u043c\u043e \u0432\u0430\u0448\u0456 \u0432\u0456\u0434\u0433\u0443\u043a\u0438\u2026"})}):i.error?(0,y.jsx)("div",{className:"surface",style:{padding:16},children:(0,y.jsx)("p",{style:{margin:0,color:"var(--error)"},children:i.error})}):r.length?(0,y.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:r.map((e,t)=>(0,y.jsxs)(p.P.div,{className:"surface",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.03*t},style:{padding:14,display:"grid",gap:8},children:[(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:[(0,y.jsx)("div",{style:{fontWeight:600,color:"var(--text-1)"},children:e.productName||e.title||"\u0422\u043e\u0432\u0430\u0440"}),(0,y.jsx)(h,{rating:e.rating||e.stars||0})]}),(0,y.jsx)("div",{style:{fontSize:14,color:"var(--text-2)"},children:e.comment}),(0,y.jsx)("div",{style:{fontSize:12,color:"var(--text-3)"},children:g(e.createdAt||e.date)})]},e.id||t))}):(0,y.jsx)("div",{className:"surface",style:{padding:16},children:(0,y.jsx)("p",{style:{margin:0,color:"var(--text-2)"},children:"\u0412\u0438 \u0449\u0435 \u043d\u0435 \u0437\u0430\u043b\u0438\u0448\u0430\u043b\u0438 \u0432\u0456\u0434\u0433\u0443\u043a\u0456\u0432. \u041f\u0456\u0441\u043b\u044f \u043f\u043e\u043a\u0443\u043f\u043a\u0438 \u0432\u0438 \u0437\u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0446\u0456\u043d\u0438\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u0438."})})},j=e=>{let{token:t}=e;const[r,i]=(0,s.useState)({firstName:"",lastName:"",birthday:""}),[n,l]=(0,s.useState)({loading:!0,error:"",success:""});(0,s.useEffect)(()=>{if(!t)return;let e=!1;return(async()=>{l({loading:!0,error:"",success:""});try{const{data:r}=await c.A.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(t)}});e||(i({firstName:r.firstName||r.name||"",lastName:r.lastName||"",birthday:r.birthday||""}),l({loading:!1,error:"",success:""}))}catch(r){console.error("[SettingsTab] \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0444\u0456\u043b\u044e:",r),e||l({loading:!1,error:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u043f\u0440\u043e\u0444\u0456\u043b\u044c.",success:""})}})(),()=>{e=!0}},[t]);const o=e=>{const{name:t,value:r}=e.target;i(e=>(0,a.A)((0,a.A)({},e),{},{[t]:r}))};return(0,y.jsx)("div",{className:"surface",style:{padding:16},children:(0,y.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(e=>(0,a.A)((0,a.A)({},e),{},{error:"",success:""}));try{await c.A.put("/api/users/me",r,{headers:{Authorization:"Bearer ".concat(t)}}),l({loading:!1,error:"",success:"\u0417\u043c\u0456\u043d\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e."})}catch(s){console.error("[SettingsTab] \u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0444\u0456\u043b\u044e:",s),l({loading:!1,error:"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438.",success:""})}},style:{display:"grid",gap:12},children:[(0,y.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,y.jsx)("label",{style:{fontSize:13,color:"var(--text-3)"},children:"\u0406\u043c\u02bc\u044f"}),(0,y.jsx)("input",{type:"text",name:"firstName",value:r.firstName,onChange:o,className:"input",placeholder:"\u0412\u0430\u0448\u0435 \u0456\u043c\u02bc\u044f"})]}),(0,y.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,y.jsx)("label",{style:{fontSize:13,color:"var(--text-3)"},children:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435"}),(0,y.jsx)("input",{type:"text",name:"lastName",value:r.lastName,onChange:o,className:"input",placeholder:"\u0412\u0430\u0448\u0435 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435"})]}),(0,y.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,y.jsx)("label",{style:{fontSize:13,color:"var(--text-3)"},children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,y.jsx)("input",{type:"date",name:"birthday",value:r.birthday,onChange:o,className:"input"})]}),n.error&&(0,y.jsx)("div",{style:{fontSize:13,color:"var(--error)"},children:n.error}),n.success&&(0,y.jsx)("div",{style:{fontSize:13,color:"var(--green)"},children:n.success}),(0,y.jsx)("button",{type:"submit",className:"btn primary",disabled:n.loading,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})})};function b(){var e;const t=(0,i.wA)(),r=(0,l.Zp)(),{user:a,token:n,isAuthenticated:c}=(0,i.d4)(e=>e.auth),u=x(820),[g,h]=(0,s.useState)("orders");(0,s.useEffect)(()=>{c||r("/login")},[c,r]);if(!a)return(0,y.jsx)("p",{className:"p center",style:{color:"var(--text-3)"},children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0444\u0456\u043b\u044e\u2026"});return(0,y.jsx)(p.P.div,{className:"page account-page",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},style:{padding:u?"10px 0 32px":"16px 0 40px"},children:(0,y.jsxs)("div",{className:"container",style:{display:"flex",flexDirection:"column",gap:16},children:[(0,y.jsxs)("header",{className:"surface",style:{padding:u?12:16,borderRadius:18,display:"flex",alignItems:u?"flex-start":"center",justifyContent:"space-between",gap:12},children:[(0,y.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,y.jsx)("div",{style:{width:u?42:50,height:u?42:50,borderRadius:"50%",background:"radial-gradient(circle at 0 0, var(--turquoise), transparent 60%), var(--surface-2)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:u?18:20},children:null===(e=(a.firstName||a.name||"B")[0])||void 0===e?void 0:e.toUpperCase()}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{style:{fontSize:12,color:"var(--text-3)"},children:"\u041c\u0456\u0439 \u0430\u043a\u0430\u0443\u043d\u0442"}),(0,y.jsx)("div",{style:{fontSize:18,fontWeight:700,color:"var(--text-1)"},children:a.firstName||a.name||"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"}),a.phone&&(0,y.jsx)("div",{style:{fontSize:13,color:"var(--text-3)",marginTop:2},children:a.phone})]})]}),(0,y.jsx)("button",{type:"button",onClick:()=>{t((0,o.ri)()),r("/")},className:"btn",style:{padding:"8px 14px",borderRadius:999,border:"1px solid var(--surface-3)",background:"transparent",color:"var(--text-2)",fontSize:13,cursor:"pointer",whiteSpace:"nowrap"},children:"\u0412\u0438\u0439\u0442\u0438"})]}),(0,y.jsx)("nav",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[{key:"orders",label:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"},{key:"reviews",label:"\u0412\u0456\u0434\u0433\u0443\u043a\u0438"},{key:"settings",label:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}].map(e=>(0,y.jsx)(f,{active:g===e.key,onClick:()=>h(e.key),ariaLabel:e.label,children:e.label},e.key))}),(0,y.jsx)("main",{children:(0,y.jsx)(d.N,{mode:"wait",children:(0,y.jsxs)(p.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},children:["orders"===g&&(0,y.jsx)(m,{token:n,isMobile:u}),"reviews"===g&&(0,y.jsx)(v,{token:n,isMobile:u}),"settings"===g&&(0,y.jsx)(j,{token:n,isMobile:u})]},g)})})]})})}}}]);
//# sourceMappingURL=400.2be8aaaa.chunk.js.map